# 批量生成器使用说明 (Batch Generator Guide)

## 系统概览

此系统通过 **JSON 数据驱动** 的方式生成 HTML 页面，将内容创作与模板渲染分离，效率提升 **3-5 倍**。

### 核心文件

1. **`batch-generator.js`** - Node.js 生成脚本
2. **`topics-batch5.json`** - 示例数据文件（含2个完整词条）
3. **输出目录** - 生成的 HTML 文件保存位置

---

## 快速开始

### 第一步：安装 Node.js

确保系统已安装 Node.js (v14+)。检查方法：

```powershell
node --version
```

### 第二步：运行生成器

```powershell
node batch-generator.js topics-batch5.json .
```

**参数说明:**
- `topics-batch5.json` - 输入的JSON数据文件
- `.` - 输出目录（当前目录）

### 第三步：查看输出

脚本会自动生成：
- `topic_lincoln.html`
- `topic_grandcanal.html`

---

## JSON 数据结构规范

### 完整示例

```json
{
  "topics": [
    {
      "filename": "topic_example.html",
      "category": "world",  // 或 "china"
      "title": "示例标题",
      "year": "1900",
      "englishName": "Example Topic",
      "intro": "开篇引言，约200字...",
      "sections": [
        {
          "title": "第一章节",
          "paragraphs": [
            "段落1内容...",
            "段落2内容..."
          ],
          "quote": "可选引用文字",
          "insightCard": {
            "title": "核心要点",
            "content": "卡片内容..."
          }
        }
      ],
      "modernInsight": "现代启示内容...",
      "legacy": "历史遗产内容...",
      "relatedTopics": [
        {"text": "关联词条", "url": "topic_xxx.html"}
      ],
      "graph": {
        "nodes": [...],
        "edges": [...]
      }
    }
  ]
}
```

### 字段详解

| 字段 | 必填 | 说明 | 示例 |
|------|------|------|------|
| `filename` | ✓ | 输出文件名 | `topic_lincoln.html` |
| `category` | ✓ | 类型：`world` 或 `china` | `world` |
| `title` | ✓ | 中文标题 | `亚伯拉罕·林肯` |
| `year` | ✓ | 年代标签 | `1809-1865` |
| `englishName` | ✓ | 英文名 | `Abraham Lincoln` |
| `intro` | ✓ | 引言（200-300字） | 见示例 |
| `sections` | ✓ | 章节数组（3-4个） | 见下文 |
| `modernInsight` | ✓ | 现代启示 | 见示例 |
| `legacy` | ✓ | 关键遗产 | 见示例 |
| `relatedTopics` | ✓ | 关联词条（3-4个） | 见示例 |
| `graph` | ✓ | 知识图谱（4-5节点） | 见示例 |

### Section 结构

每个 `section` 包含：

```json
{
  "title": "章节标题",
  "paragraphs": ["段落1", "段落2", "段落3"],
  "quote": "可选引用（名言/史料）",
  "insightCard": {
    "title": "卡片标题",
    "content": "卡片内容"
  }
}
```

**注意:**
- `quote` 和 `insightCard` 可选
- 建议每个 section 有 2-3 个段落

---

## 模板自动适配

### 世界史模板 (`category: "world"`)

**颜色方案:**
- 主色: 深蓝 `#1E3A8A`
- 背景: 浅灰蓝 `#F8FAFC`
- 点缀: 琥珀金 `#B45309`

**导航标题:** "西方文明兴起"

### 中国史模板 (`category: "china"`)

**颜色方案:**
- 主色: 朱红 `#991B1B`
- 背景: 米黄 `#FFF7ED`
- 点缀: 翡翠绿 `#059669`

**导航标题:** "晚清风云"

---

## 内容创作建议

### 深度要求 (2500字+)

1. **引言** (200-300字): 宏大叙事 + 历史意义
2. **Section 1-3** (各 600-800字): 按时间/维度展开
3. **现代启示 + 遗产** (各 100-150字): 简洁有力

### 高质量内容标准

✓ **具体细节**: 使用确切的数字、日期、人名  
✓ **情感共鸣**: 用生动语言还原历史现场  
✓ **逻辑严密**: 因果关系清晰，观点有据  
✓ **避免套话**: 拒绝"意义深远"等空洞表述  

---

## 常见问题 (FAQ)

### Q1: 如何批量生成10个页面？

在 JSON 文件的 `topics` 数组中添加10个对象即可。脚本会自动循环处理。

### Q2: 内容不足2500字怎么办？

检查以下部分是否充实：
- 每个 section 是否有 3+ 段落
- 是否使用了 `quote` 和 `insightCard`
- `intro` 是否达到 200-300 字

### Q3: 如何验证生成的HTML？

```powershell
# 在浏览器中打开
start topic_example.html
```

检查要点：
- [ ] 颜色是否正确（蓝/红）
- [ ] 知识图谱是否显示
- [ ] 关联词条链接是否正确

---

## 效率对比

| 方式 | 单页耗时 | 10页耗时 | 风险 |
|------|----------|----------|------|
| 传统逐个生成 | 5分钟 | 50分钟 | 格式错误高 |
| **JSON生成器** | **1分钟** | **10分钟** | **格式统一** |

**提升倍数:** 约 **5倍**

---

## 下一步

1. 基于 `topics-batch5.json` 编写更多词条数据
2. 运行 `batch-generator.js` 批量生成
3. 在浏览器中验证输出质量
4. 如有问题，调整 JSON 数据重新生成

**关键优势:**  
只需专注于内容创作（JSON），无需重复编写 HTML 模板代码！
