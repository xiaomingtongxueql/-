# 词条详情页统一模板说明

## 概述

所有词条详情页现在都使用与朝代详情页相同的模板（`detail-standard.html`），包含以下功能：

- ✅ 视频容器（支持B站视频嵌入）
- ✅ 关系图谱（右侧边栏，可点击跳转）
- ✅ 核心词列表（右侧边栏，可点击跳转）
- ✅ 多个内容章节
- ✅ 考点解析
- ✅ 历史回响

## 数据格式

词条数据可以使用以下格式：

```json
{
  "id": "confucianism",
  "title": "罢黜百家，独尊儒术",
  "definition": "独尊儒术是汉武帝采纳董仲舒建议、于公元前134年前后实行的思想政策...",
  "display": "概念词条",
  "cat": "china",
  "examPoints": [
    {
      "title": "独尊儒术的目的与作用",
      "content": "统一思想，巩固大一统；儒家\"君君、臣臣\"等主张利于维护中央集权。"
    },
    {
      "title": "历史影响",
      "content": "儒家成为正统，太学、科举以儒家经典为核心；影响延续至近代。"
    }
  ],
  "relatedLinks": [
    {"text": "汉朝·汉武帝", "url": "detail_han.html"},
    {"text": "推恩令", "url": "topic_tuien.html"},
    {"text": "科举制", "url": "topic_keju.html"}
  ],
  "video": {
    "type": "bilibili",
    "bvid": "BV...",
    "aid": "...",
    "cid": "..."
  },
  "graph": [
    {"label": "汉武帝", "top": 50, "left": 50, "type": "core", "url": "detail_han.html"},
    {"label": "推恩令", "top": 20, "left": 50, "type": "sub", "url": "topic_tuien.html"}
  ],
  "keywords": [
    {"text": "推恩令", "url": "topic_tuien.html"},
    {"text": "察举制", "url": "topic_chaju.html"}
  ]
}
```

## 字段说明

### 必需字段
- `id`: 词条唯一标识
- `title`: 词条标题
- `definition`: 词条定义（将作为intro显示）

### 可选字段
- `display`: 显示时间标签（默认："概念词条"）
- `cat`: 分类（"china" | "world" | "compare"，默认："china"）
- `examPoints`: 考点数组，每个考点包含 `title` 和 `content`
- `relatedLinks`: 关联词数组，每个关联词包含 `text` 和 `url`
- `video`: 视频对象（B站视频信息）
- `graph`: 关系图谱节点数组（如果不提供，将从 `relatedLinks` 自动生成）
- `keywords`: 核心词数组（如果不提供，将从 `relatedLinks` 自动生成）
- `impacts`: 历史回响数组
- `section1/2/3`: 自定义章节内容

## 使用生成器

### 方法1：使用生成器界面

1. 打开 `generator.html`
2. 选择"概念词条"类型
3. 输入词条ID或直接输入JSON数据
4. 点击"生成页面"
5. 下载生成的HTML文件

### 方法2：转换现有词条

1. 打开 `generator.html`
2. 在"词条转换工具"中输入现有词条文件名（如：`topic_confucianism.html`）
3. 点击"转换词条"
4. 系统会自动提取数据并生成新格式页面
5. 下载生成的HTML文件

### 方法3：手动创建数据文件

创建 `data/topics.json`：

```json
{
  "topics": [
    {
      "id": "confucianism",
      "title": "罢黜百家，独尊儒术",
      "definition": "...",
      "examPoints": [...],
      "relatedLinks": [...]
    }
  ]
}
```

然后在生成器中选择词条类型并输入ID。

## 自动转换功能

生成器会自动处理以下转换：

1. **定义 → 介绍**：`definition` 字段自动转换为 `intro`
2. **关联词 → 图谱节点**：如果未提供 `graph`，将从 `relatedLinks` 自动生成
3. **关联词 → 核心词**：如果未提供 `keywords`，将从 `relatedLinks` 自动生成
4. **考点格式**：自动转换为标准格式

## 注意事项

1. 所有词条现在使用相同的模板，确保样式和功能一致
2. 关系图谱和核心词都可以点击跳转
3. 视频容器支持B站视频嵌入
4. 如果某个章节没有内容，该章节会自动隐藏
5. 核心词会在正文中自动高亮并添加链接

## 示例

查看以下文件了解完整示例：
- `detail_han.html` - 朝代详情页示例
- `topic_confucianism.html` - 旧版词条（需要转换）

转换后的词条将具有与朝代详情页相同的结构和功能。
