# 溯鉴历史教育平台 - 产品规划书

## 一、项目概述

### 1.1 项目定位
公益历史教育平台，基于人教版初中和高中历史教科书，提供交互式历史学习体验。

### 1.2 核心价值
- **内容权威性**：严格遵循人教版教材体系
- **交互式学习**：时间轴、知识图谱、视频讲解三位一体
- **知识关联性**：类似Obsidian的知识网络，帮助理解历史脉络

---

## 二、产品架构

### 2.1 功能模块

#### 2.1.1 主页时间轴 (index.html)
**功能描述**：
- 三个标签页：中国史、世界史、中外对照
- 时间轴可视化展示历史事件
- 每个事件卡片可点击，打开详情模态框或跳转详情页

**技术要点**：
- 响应式布局（移动端优化）
- 虚拟滚动（处理大量数据）
- 平滑动画过渡

#### 2.1.2 事件详情页 (detail_*.html)
**功能描述**：
- 左侧：核心内容（标题、视频、正文、考点解析）
- 右侧：知识图谱 + 核心词列表
- 所有核心词和图谱节点可点击跳转

**内容结构**：
```
- 序章（引入）
- 视频讲解（B站嵌入）
- 核心叙事（2-3个主要知识点）
- 考点解析（考试重点）
- 历史回响（影响与意义）
```

#### 2.1.3 概念词条页 (topic_*.html)
**功能描述**：
- 单个历史概念/术语的详细解释
- 同样包含知识图谱和关联词
- 结构类似详情页，但更简洁

#### 2.1.4 知识图谱系统
**功能描述**：
- 右侧边栏可视化展示
- 节点可点击跳转
- 显示事件/概念之间的关系

**技术方案**：
- 初期：CSS定位 + SVG连线（轻量级）
- 后期：考虑D3.js（如果关系复杂）

---

## 三、内容规划

### 3.1 内容覆盖范围（分阶段）

#### 第一阶段：史前-秦汉（已完成部分）
- ✅ 元谋人、北京人、山顶洞人
- ✅ 炎黄联盟、夏朝建立
- ⚠️ 商朝、西周（需完善）
- ⚠️ 春秋战国（需完善）
- ⚠️ 秦朝（需完善）
- ⚠️ 汉朝（需完善）

#### 第二阶段：魏晋-宋元
- 魏晋南北朝
- 隋朝
- 唐朝（已有框架）
- 两宋
- 元朝

#### 第三阶段：明清-现代
- 明朝
- 清朝前期
- 鸦片战争
- 辛亥革命
- 新中国成立

#### 第四阶段：世界史
- 古埃及、古巴比伦
- 古希腊、古罗马
- 中世纪欧洲
- 阿拉伯帝国
- 文艺复兴
- 工业革命
- 两次世界大战

### 3.2 内容质量标准

**必须包含**：
1. 【考点标签】明确标注考试重点
2. 【时间定位】准确的时间信息
3. 【核心概念】提取3-5个核心词
4. 【关系图谱】至少3个关联节点
5. 【视频资源】B站或其他视频链接

**内容风格**：
- 学术严谨，但语言通俗
- 避免过度学术化，保持可读性
- 突出历史唯物主义视角

---

## 四、技术架构

### 4.1 技术栈

**前端**：
- HTML5 + Tailwind CSS（CDN）
- 原生JavaScript（避免框架依赖）
- Lucide图标库

**数据层**：
- 当前：硬编码在`index.html`的`HISTORY_DATA`数组
- **建议改进**：分离为`data/history.json`（便于维护）

**文件结构**：
```
/
├── index.html              # 主页时间轴
├── detail_*.html          # 事件详情页
├── topic_*.html           # 概念词条页
├── data/
│   └── history.json       # 数据层（建议）
├── assets/                # 静态资源（如需要）
└── 项目规划书.md
```

### 4.2 代码规范

**原则**：
- ✅ 精简：避免冗余代码
- ✅ 模块化：功能分离
- ✅ 可维护：注释清晰
- ❌ 拒绝：过度抽象、AI幻觉代码

**命名规范**：
- 文件：`detail_事件名.html`、`topic_概念名.html`
- 变量：驼峰命名，语义清晰
- CSS类：使用Tailwind工具类

---

## 五、UI/UX设计规范

### 5.1 设计原则

**简洁优雅**：
- 留白充足
- 色彩克制（青金色#B5A642为主色）
- 字体：标题用衬线体，正文用无衬线体

**内容为中心**：
- 减少装饰性元素
- 突出核心内容
- 清晰的视觉层次

### 5.2 配色方案

```css
主色：青金色 #B5A642（中国史）
辅色：学术蓝 #0969DA（世界史）
背景：冷灰白 #F5F7FA
文字：深黑 #0E101A / 岩石灰 #57534e
```

### 5.3 响应式断点

- 移动端：< 768px（单列布局）
- 平板：768px - 1024px（两列布局）
- 桌面：> 1024px（完整布局）

---

## 六、交互设计

### 6.1 核心交互流程

**主页 → 详情页**：
1. 点击事件卡片 → 打开模态框（快速预览）
2. 点击"进入详情页" → 跳转详情页（深度阅读）
3. 点击核心词/图谱节点 → 直接跳转对应页面

**详情页内部**：
- 右侧知识图谱：点击节点跳转
- 右侧核心词列表：点击跳转
- 正文中的核心词：可高亮，点击跳转（需实现）

### 6.2 动画效果

**原则**：适度，不干扰阅读
- 卡片悬浮：轻微上浮 + 阴影加深
- 页面切换：淡入淡出
- 滚动动画：Intersection Observer实现

---

## 七、数据模型设计

### 7.1 事件数据结构

```javascript
{
  id: "唯一标识",
  year: 年份（负数表示BC）,
  display: "显示时间（如'BC 221'）",
  title: "事件标题",
  enTitle: "英文标题",
  cat: "china|world|compare",
  desc: "简短描述（含【考点标签】）",
  link: "详情页URL",
  keywords: [
    { text: "核心词", url: "词条页URL" }
  ],
  graph: [
    { label: "节点名", top: 百分比, left: 百分比, type: "core|sub", url: "跳转URL" }
  ],
  rel: ["关联事件ID数组"],
  video: "视频URL（B站BV号）" // 新增字段
}
```

### 7.2 数据分离建议

**当前问题**：数据硬编码在JS中，难以维护

**解决方案**：
1. 创建`data/history.json`
2. 使用`fetch()`加载数据
3. 或使用构建工具（如Vite）导入JSON

---

## 八、功能优先级（MVP）

### P0（必须实现）
- ✅ 主页时间轴（已完成）
- ✅ 详情页基础结构（已完成）
- ✅ 知识图谱基础功能（已完成）
- ⚠️ 核心词点击跳转（需完善）
- ⚠️ 视频嵌入（需统一处理）

### P1（重要功能）
- 全局搜索（事件、人物、概念）
- 正文核心词高亮+点击
- 移动端优化（时间轴交互）
- 数据层分离（JSON文件）

### P2（增强功能）
- 学习进度追踪（localStorage）
- 收藏功能
- 打印/导出PDF
- 分享功能

---

## 九、开发计划

### 阶段一：完善现有功能（1-2周）
1. 统一详情页模板
2. 完善核心词跳转逻辑
3. 统一视频嵌入方式
4. 数据层分离

### 阶段二：内容填充（持续）
1. 按优先级填充历史事件
2. 完善知识图谱关系
3. 添加视频资源

### 阶段三：功能增强（2-3周）
1. 全局搜索
2. 移动端优化
3. 性能优化（虚拟滚动）

---

## 十、风险与挑战

### 10.1 内容风险
- **风险**：内容量大，难以快速填充
- **应对**：分阶段，优先核心考点

### 10.2 技术风险
- **风险**：知识图谱复杂度增加，性能问题
- **应对**：初期使用简单方案，后期优化

### 10.3 维护风险
- **风险**：数据硬编码，难以更新
- **应对**：尽快实现数据层分离

---

## 十一、成功指标

### 11.1 内容指标
- 覆盖人教版初高中核心考点（80%+）
- 每个事件至少3个核心词
- 每个事件至少3个图谱节点

### 11.2 技术指标
- 页面加载时间 < 2s
- 移动端适配良好
- 代码可维护性高

### 11.3 用户体验指标
- 交互流畅，无明显卡顿
- 内容准确，符合教材
- 视觉统一，风格一致

---

## 十二、后续规划

### 12.1 功能扩展
- 用户系统（学习记录）
- 题库系统（配套练习）
- 时间线自定义（用户创建）

### 12.2 内容扩展
- 历史地图可视化
- 3D文物展示
- 历史人物传记

---

## 附录：关键决策记录

### 决策1：不使用框架
**原因**：保持代码精简，避免过度工程化
**影响**：使用原生JS，代码量可控

### 决策2：知识图谱初期简单实现
**原因**：避免引入复杂库，保持轻量
**影响**：使用CSS定位，后期可升级

### 决策3：数据层分离
**原因**：便于内容维护和更新
**影响**：需要重构现有代码结构

---

**文档版本**：v1.0  
**最后更新**：2024年  
**维护者**：产品团队
