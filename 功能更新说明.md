# åŠŸèƒ½æ›´æ–°è¯´æ˜

## âœ… å·²å®Œæˆçš„åŠŸèƒ½å¢å¼º

### 1. æ ¸å¿ƒè¯é«˜äº®å’Œç‚¹å‡»è·³è½¬ âœ¨

**åŠŸèƒ½æè¿°**ï¼š
- åœ¨è¯¦æƒ…é¡µæ­£æ–‡ä¸­è‡ªåŠ¨è¯†åˆ«å¹¶é«˜äº®æ ¸å¿ƒè¯
- æ ¸å¿ƒè¯å˜ä¸ºå¯ç‚¹å‡»é“¾æ¥ï¼Œè·³è½¬åˆ°å¯¹åº”çš„è¯æ¡é¡µ
- ä½¿ç”¨é’é‡‘è‰²é«˜äº®ï¼Œæ‚¬åœæ—¶å˜ä¸ºåœŸè¤è‰²

**å®ç°æ–¹å¼**ï¼š
- åˆ›å»ºäº† `js/content-enhancer.js` å·¥å…·åº“
- ä½¿ç”¨ `KeywordHighlighter` ç±»å¤„ç†æ–‡æœ¬é«˜äº®
- å·²åº”ç”¨åˆ°æ‰€æœ‰è¯¦æƒ…é¡µï¼š
  - `detail_primitive.html`ï¼ˆåŒ—äº¬äººï¼‰
  - `detail_legends.html`ï¼ˆç‚é»„è”ç›Ÿï¼‰
  - `detail_shandingdong.html`ï¼ˆå±±é¡¶æ´äººï¼‰
  - `detail_yuanmou.html`ï¼ˆå…ƒè°‹äººï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```javascript
const keywords = [
    { text: "æ ¸å¿ƒè¯", url: "topic_xxx.html" }
];

ContentEnhancer.KeywordHighlighter.processSelector(
    '.lg\\:col-span-9 p',
    keywords,
    { color: 'text-gold', hoverColor: 'hover:text-earth' }
);
```

### 2. ç»Ÿä¸€è§†é¢‘åµŒå…¥ç»„ä»¶ ğŸ¥

**åŠŸèƒ½æè¿°**ï¼š
- ç»Ÿä¸€çš„è§†é¢‘ç»„ä»¶ï¼Œæ”¯æŒBç«™è§†é¢‘åµŒå…¥
- è‡ªåŠ¨å¤„ç†è§†é¢‘å ä½ç¬¦
- å¯åœ¨ä¸»é¡µæ¨¡æ€æ¡†å’Œè¯¦æƒ…é¡µä¸­ä½¿ç”¨

**å®ç°æ–¹å¼**ï¼š
- `VideoEmbed` ç±»æä¾›ç»Ÿä¸€çš„è§†é¢‘æ¸²æŸ“æ¥å£
- æ”¯æŒBç«™è§†é¢‘ï¼ˆbvid, aid, cidï¼‰
- è‡ªåŠ¨ç”Ÿæˆå ä½ç¬¦ï¼ˆå½“æ²¡æœ‰è§†é¢‘æ—¶ï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```javascript
// æ¸²æŸ“è§†é¢‘åˆ°å®¹å™¨
ContentEnhancer.VideoEmbed.render(
    containerElement,
    { type: 'bilibili', bvid: 'BVxxx', aid: 'xxx', cid: 'xxx' }
);
```

### 3. ç§»åŠ¨ç«¯ä¼˜åŒ– ğŸ“±

**åŠŸèƒ½æè¿°**ï¼š
- ä¼˜åŒ–æ—¶é—´è½´åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤º
- æ¨¡æ€æ¡†åœ¨ç§»åŠ¨ç«¯å…¨å±æ˜¾ç¤º
- å¢åŠ å¡ç‰‡ç‚¹å‡»åŒºåŸŸï¼ˆæœ€å°é«˜åº¦120pxï¼‰
- å“åº”å¼æ ‡ç­¾é¡µæŒ‰é’®

**å®ç°æ–¹å¼**ï¼š
- `MobileOptimizer` ç±»è‡ªåŠ¨æ£€æµ‹ç§»åŠ¨ç«¯
- æ·»åŠ ç§»åŠ¨ç«¯ç‰¹å®šçš„CSSç±»
- ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼ŒåŠ¨æ€è°ƒæ•´

**CSSä¼˜åŒ–**ï¼š
```css
@media (max-width: 768px) {
    .mobile-timeline .timeline-card {
        min-height: 120px;
        padding: 1rem;
    }
    
    #bentoModal.mobile-modal #bentoContent {
        height: 100vh;
        border-radius: 0;
    }
}
```

### 4. æ•°æ®å±‚åˆ†ç¦» ğŸ“Š

**åŠŸèƒ½æè¿°**ï¼š
- æ‰€æœ‰å†å²äº‹ä»¶æ•°æ®ç»Ÿä¸€å­˜å‚¨åœ¨ `data/history.json`
- ä¸»é¡µæ”¯æŒä»JSONåŠ è½½æ•°æ®ï¼ˆä¿ç•™ç¡¬ç¼–ç ä½œä¸ºåå¤‡ï¼‰
- ä¾¿äºå†…å®¹ç»´æŠ¤å’Œæ›´æ–°

**æ•°æ®ç»“æ„**ï¼š
```json
{
  "events": [
    {
      "id": "å”¯ä¸€æ ‡è¯†",
      "year": å¹´ä»½,
      "title": "äº‹ä»¶æ ‡é¢˜",
      "keywords": [{"text": "æ ¸å¿ƒè¯", "url": "é“¾æ¥"}],
      "graph": [{"label": "èŠ‚ç‚¹", "url": "é“¾æ¥"}],
      "video": {"type": "bilibili", "bvid": "BVå·"}
    }
  ]
}
```

## ğŸ“ ä½¿ç”¨æŒ‡å—

### æ·»åŠ æ–°è¯¦æƒ…é¡µæ—¶

1. **å¼•å…¥å·¥å…·åº“**ï¼š
```html
<script src="js/content-enhancer.js"></script>
```

2. **é…ç½®æ ¸å¿ƒè¯**ï¼š
```javascript
const keywords = [
    { text: "æ ¸å¿ƒè¯1", url: "topic_xxx.html" },
    { text: "æ ¸å¿ƒè¯2", url: "detail_xxx.html" }
];
```

3. **åº”ç”¨é«˜äº®**ï¼š
```javascript
ContentEnhancer.KeywordHighlighter.processSelector(
    '.lg\\:col-span-9 p, .lg\\:col-span-9 div',
    keywords
);
```

4. **ä½¿ç”¨è§†é¢‘ç»„ä»¶**ï¼š
```html
<div id="video-container" style="position: relative; width: 100%; height: 100%;"></div>
<script>
    ContentEnhancer.VideoEmbed.render(
        document.getElementById('video-container'),
        { type: 'bilibili', bvid: 'BVxxx', aid: 'xxx', cid: 'xxx' }
    );
</script>
```

## ğŸ¯ æŠ€æœ¯ç‰¹ç‚¹

1. **ä»£ç ç²¾ç®€**ï¼šä½¿ç”¨åŸç”ŸJavaScriptï¼Œæ— æ¡†æ¶ä¾èµ–
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šæŒ‰éœ€åŠ è½½ï¼Œé¿å…é‡å¤å¤„ç†
3. **å…¼å®¹æ€§å¥½**ï¼šä¿ç•™fallbackæœºåˆ¶ï¼Œç¡®ä¿åŠŸèƒ½å¯ç”¨
4. **æ˜“äºç»´æŠ¤**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼ŒåŠŸèƒ½ç‹¬ç«‹

## ğŸ”„ åç»­ä¼˜åŒ–å»ºè®®

1. **æœç´¢åŠŸèƒ½**ï¼šå®ç°å…¨å±€æœç´¢ï¼ˆäº‹ä»¶ã€äººç‰©ã€æ¦‚å¿µï¼‰
2. **å­¦ä¹ è¿›åº¦**ï¼šä½¿ç”¨localStorageè®°å½•å­¦ä¹ è¿›åº¦
3. **è™šæ‹Ÿæ»šåŠ¨**ï¼šå½“äº‹ä»¶æ•°é‡å¢å¤šæ—¶ï¼Œä¼˜åŒ–æ»šåŠ¨æ€§èƒ½
4. **PWAæ”¯æŒ**ï¼šæ”¯æŒç¦»çº¿è®¿é—®

---

**æ›´æ–°æ—¥æœŸ**ï¼š2024å¹´  
**ç‰ˆæœ¬**ï¼šv1.1
